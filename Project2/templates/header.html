{% load static %}
<script src="https://cdn.tailwindcss.com"></script>
<link href="{% static 'css/all.css' %}" rel="stylesheet">
<script type="text/javascript" src="{% static 'js/all.js' %}"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<!-- AOS Library -->
<script src="https://animatedicons.co/scripts/embed-animated-icons.js"></script>
<header class="flex justify-between items-center p-4">

  <!-- Logo -->
  <div class="font-bold text-2xl">
    <a href="{% url 'home' %}">Logo</a>
  </div>

  <!-- Burger Icon for Mobile -->
  <button id="burger-icon" class="md:hidden text-3xl text-black">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Navigation for larger screens -->
  <div class="hidden md:flex space-x-2 text-xl">
    <a href="{% url 'home' %}" class="p-2">Home</a>
    <a href="{% url 'competition' %}" class="p-2">Competition</a>
    <a href="{% url 'gallery' %}" class="p-2">Gallery</a>
    <a href="{% url 'membership' %}" class="relative inline-block py-2 px-6 text-white bg-gradient-to-r from-yellow-500 via-yellow-400 to-yellow-300 rounded-full shadow-2xl transform transition-all duration-500 ease-out hover:bg-gradient-to-l hover:from-yellow-600 hover:to-yellow-500 hover:scale-110 hover:ring-4 hover:ring-yellow-300 hover:shadow-2xl hover:shadow-yellow-500 hover:text-black">
      Membership
      <!-- Glowing Border -->
      <span class="absolute inset-0 border-2 border-transparent rounded-full animate-pulse glow-border"></span>
    </a>
  </div>

  <div class="hidden md:flex md:items-center space-x-2 md:ml-4 md:text-lg text-xl">
    {% if user.is_authenticated %}
    <!-- Profile Section with Hover -->
    <div class="relative group">
      {% if user.userprofile.profile_picture %}
        <img src="{{ user.userprofile.profile_picture.url }}" alt="Profile" class="w-10 h-10 rounded-full cursor-pointer" id="profile-icon">
      {% else %}
        <img src="{% static 'path/to/default-avatar.jpg' %}" alt="Default Profile" class="w-10 h-10 rounded-full cursor-pointer" id="profile-icon">
      {% endif %}
      <!-- Dropdown Menu -->
      <div id="profile-dropdown" class="absolute right-0 hidden bg-white shadow-lg rounded-md mt-2 w-48 group-hover:block z-50">
        <a href="{% url 'dashboard' user.username %}" class="block px-4 py-2 text-black hover:bg-gray-100">Profile</a>
        <a href="{% url 'logout' %}" class="block px-4 py-2 text-black hover:bg-gray-100">Logout</a>
      </div>
    </div>
    {% else %}
    <a href="{% url 'register' %}" class="join-now-btn inline-block py-2 px-6 text-white bg-gradient-to-r from-sky-500 via-indigo-500 to-pink-500 rounded-3xl shadow-lg transform transition-all duration-300 ease-out hover:scale-110">
      Join Now
    </a>
    {% endif %}
    
    <button onclick="toggleDarkMode()" class="text-xl p-2 bg-black w-20 rounded-full text-black dark:text-white transition-all">
      <i id="mode-icon" class="fas fa-moon"></i>
    </button>
  </div>
</header>

<!-- Mobile Menu -->
<div id="mobile-menu" class="hidden fixed inset-0 bg-black bg-opacity-0 z-50 p-5 md:hidden">
  <div class="flex flex-col items-center justify-top space-y-5 text-white h-full">
    <button id="close-menu" class="text-3xl text-white absolute top-5 right-5" onclick="toggleMenu()">Ã—</button>
    <a href="{% url 'home' %}" class="p-3">Home</a>
    <a href="{% url 'competition' %}" class="p-3">Competition</a>
    <a href="{% url 'gallery' %}" class="p-3">Gallery</a>
    <a href="{% url 'membership' %}" class="relative w-40 inline-block py-2 px-6 text-white bg-gradient-to-r from-yellow-500 via-yellow-400 to-yellow-300 rounded-full shadow-2xl transform transition-all duration-500 ease-out hover:bg-gradient-to-l hover:from-yellow-600 hover:to-yellow-500 hover:scale-110 hover:ring-4 hover:ring-yellow-300 hover:shadow-2xl hover:shadow-yellow-500 hover:text-black">
      Membership
      <!-- Glowing Border -->
      <span class="absolute inset-0 border-2 border-transparent rounded-full animate-pulse glow-border"></span>
    </a>
    <a href="{% url 'register' %}" class="join-now-btn w-40 inline-block py-2 px-10 text-white bg-gradient-to-r from-sky-500 via-indigo-500 to-pink-500 rounded-3xl shadow-lg transform transition-all duration-300 ease-out hover:scale-110">
      Join Now
    </a>

    <!-- Dark/Light Mode Toggle Button -->
    <button onclick="toggleDarkMode()" class="text-xl p-2 w-20 rounded-full text-black dark:text-white transition-all">
      <i id="mode-icon" class="fas fa-moon"></i>
    </button>
  </div>
</div>

<script>
  // Toggle Mobile Menu (Burger Icon)
  const burgerIcon = document.getElementById('burger-icon');
  const mobileMenu = document.getElementById('mobile-menu');
  const closeMenu = document.getElementById('close-menu');

  burgerIcon.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  closeMenu.addEventListener('click', () => {
    mobileMenu.classList.add('hidden');
  });

  // Toggle Dark Mode
  function toggleDarkMode() {
    document.body.classList.toggle('dark');
    const icon = document.getElementById('mode-icon');
    icon.classList.toggle('fa-sun');
    icon.classList.toggle('fa-moon');
  }

  // Toggle Profile Dropdown visibility on click (only when clicked)
  const profileIcon = document.getElementById('profile-icon');
  const profileDropdown = document.getElementById('profile-dropdown');

  profileIcon.addEventListener('click', () => {
    profileDropdown.classList.toggle('hidden');
  });
</script>
